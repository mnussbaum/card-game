---
min_player_count: 2
max_player_count: 4

player_hand:
  blind_cards:
    max_card_limit: 3
    visibility: FaceDown
  lower_cards:
    max_card_limit: 3
    visibility: FaceUp
  hand_cards:
    max_card_limit: 3
    visibility: VisibleToOwner

communal_cards:
  active_pile:
    visibility: TopFaceUpRestFaceDown
  discard_pile:
    visibility: FaceDown

cards:
  Two:
    value: Wild
    consequences:
      - verb: ConstrainPlayableCards
        object: CardsMustBeSameRank
      - verb: MoveNextTurn
        object:
          RelativePlayer:
            offset_from_current_player: 1
  Three:
    value: Wild
    consequences:
      - verb: ConstrainPlayableCards
        object: CardsMustBeSameRank
      - verb: MoveCards
        object:
          CardMove:
            card_group_name_source:
              owner:
                Name: communal_cards
              name: active_pile
            card_group_name_dest:
              owner:
                RelativePlayer:
                  offset_from_current_player: 1
              name: hand_cards
      - verb: MoveNextTurn
        object:
          RelativePlayer:
            offset_from_current_player: 2
  Four:
    value:
      Numeric: 1
    consequences:
      - verb: ConstrainPlayableCards
        object:
          MinimumPlayableCard: LastPlayedCard
      - verb: ConstrainPlayableCards
        object: CardsMustBeSameRank
      - verb: MoveNextTurn
        object:
          RelativePlayer:
            offset_from_current_player: 1
  Five:
    value:
      Numeric: 2
    consequences:
      - verb: ConstrainPlayableCards
        object: CardsMustBeSameRank
      - verb: ConstrainPlayableCards
        object:
          MinimumPlayableCard: LastPlayedCard
      - verb: MoveNextTurn
        object:
          RelativePlayer:
            offset_from_current_player: 1
  Six:
    value:
      Numeric: 3
    consequences:
      - verb: ConstrainPlayableCards
        object: CardsMustBeSameRank
      - verb: ConstrainPlayableCards
        object:
          MinimumPlayableCard: LastPlayedCard
      - verb: MoveNextTurn
        object:
          RelativePlayer:
            offset_from_current_player: 1
  Seven:
    value:
      Numeric: 4
    consequences:
      - verb: ConstrainPlayableCards
        object: CardsMustBeSameRank
      - verb: ConstrainPlayableCards
        object:
          MinimumPlayableCard: LastPlayedCard
      - verb: MoveNextTurn
        object:
          RelativePlayer:
            offset_from_current_player: 1
  Eight:
    value:
      Numeric: 5
    consequences:
      - verb: ConstrainPlayableCards
        object: CardsMustBeSameRank
      - verb: ConstrainPlayableCards
        object:
          MinimumPlayableCard: LastPlayedCard
      - verb: MoveNextTurn
        object:
          RelativePlayer:
            offset_from_current_player: 1
  Nine:
    value:
      Numeric: 6
    consequences:
      - verb: ConstrainPlayableCards
        object: CardsMustBeSameRank
      - verb: ConstrainPlayableCards
        object:
          MinimumPlayableCard: LastPlayedCard
      - verb: MoveNextTurn
        object:
          RelativePlayer:
            offset_from_current_player: 1
  Ten:
    value: Wild
    consequences:
      - verb: ConstrainPlayableCards
        object: CardsMustBeSameRank
      - verb: MoveCards
        object:
          CardMove:
            card_group_name_source:
              owner:
                Name: communal_cards
              name: active_pile
            card_group_name_dest:
              owner:
                Name: communal_cards
              name: discard_pile
      - verb: MoveNextTurn
        object:
          RelativePlayer:
            offset_from_current_player: 0
  Jack:
    value:
      Numeric: 7
    consequences:
      - verb: ConstrainPlayableCards
        object: CardsMustBeSameRank
      - verb: ConstrainPlayableCards
        object:
          MinimumPlayableCard: LastPlayedCard
      - verb: MoveNextTurn
        object:
          RelativePlayer:
            offset_from_current_player: 1
  Queen:
    value:
      Numeric: 8
    consequences:
      - verb: ConstrainPlayableCards
        object: CardsMustBeSameRank
      - verb: ConstrainPlayableCards
        object:
          MinimumPlayableCard: LastPlayedCard
      - verb: MoveNextTurn
        object:
          RelativePlayer:
            offset_from_current_player: 1
  King:
    value:
      Numeric: 9
    consequences:
      - verb: ConstrainPlayableCards
        object: CardsMustBeSameRank
      - verb: ConstrainPlayableCards
        object:
          MinimumPlayableCard: LastPlayedCard
      - verb: MoveNextTurn
        object:
          RelativePlayer:
            offset_from_current_player: 1
  Ace:
    value:
      Numeric: 10
    consequences:
      - verb: ConstrainPlayableCards
        object: CardsMustBeSameRank
      - verb: ConstrainPlayableCards
        object:
          MinimumPlayableCard: LastPlayedCard
      - verb: MoveNextTurn
        object:
          RelativePlayer:
            offset_from_current_player: 1

turn_actions:
  ? Bounded:
      min: 0
      max: 0
  :
    - verb: MoveCards
      object:
        CardMove:
          card_group_name_source:
            owner:
              RelativePlayer:
                offset_from_current_player: 0
            name: hand_cards
          card_group_name_dest:
            owner:
              RelativePlayer:
                offset_from_current_player: 0
            name: lower_cards
    - verb: MoveCards
      object:
        CardMove:
          card_group_name_source:
            owner:
              RelativePlayer:
                offset_from_current_player: 0
            name: lower_cards
          card_group_name_dest:
            owner:
              RelativePlayer:
                offset_from_current_player: 0
            name: hand_cards
  ? LowerBounded:
      min: 1
  :
    - verb: MoveCards
      object:
        CardMove:
          card_group_name_source:
            owner:
              Name: communal_cards
            name: active_pile
          card_group_name_dest:
            owner:
              RelativePlayer:
                offset_from_current_player: 0
            name: hand_cards
    - verb: MoveCards
      object:
        CardMove:
          card_group_name_source:
            owner:
              RelativePlayer:
                offset_from_current_player: 0
            name: hand_cards
          card_group_name_dest:
            owner:
              Name: communal_cards
            name: active_pile

ending_conditions:
  - player_count: AllButOnePlayer
    card_count: 0
